!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.Condanna=n()}(this,function(){var e,n,t,r;return e=function(){var r;return r=t(),{promise:{then:function(t,o){var u;return u=e(),"function"==typeof t?r.push("F",function(e){var r,o;try{r=t(e)}catch(i){o=i,u.reject(o)}n(u,r)}):r.push("F",u.resolve),"function"==typeof o?r.push("R",function(e){var t,r;try{t=o(e)}catch(i){r=i,u.reject(r)}n(u,t)}):r.push("R",u.reject),u.promise}},resolve:function(e){return r.setModeAndValue("F",e)},reject:function(e){return r.setModeAndValue("R",e)}}},n=function(e,t){var r,o,u,i,c;if(e.promise===t)return void e.reject(new TypeError("Tried to resolve promise with itself"));if(null==t||"object"!=typeof t&&"function"!=typeof t)return void e.resolve(t);r=null;try{r=t.then}catch(f){return o=f,void e.reject(o)}if("function"!=typeof r)return void e.resolve(t);u=!1,i=function(t){u||(u=!0,n(e,t))},c=function(n){u||(u=!0,e.reject(n))};try{r.call(t,i,c)}catch(f){o=f,c(o)}},t=function(){var e,n,t,r;return e=[],n=null,t=null,r=function(e){setTimeout(function(){e(t)},0)},{push:function(t,o){null==n?e.push({mode:t,f:o}):n===t&&r(o)},setModeAndValue:function(o,u){null==n&&(n=o,t=u,e.filter(function(e){return e.mode===n}).map(function(e){return e.f}).forEach(r),e=null)}}},r={deferred:e}});